<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Coles Fresh Produce Info</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="app">
    <div class="phone">
      <!-- Top bar -->
      <div class="topbar">
        <h1 id="screenTitle">Find Produce</h1>
        <div class="row">
          <button id="backBtn" class="icon-btn" style="visibility:hidden" aria-label="Back">‚Üê</button>
          <div class="search">
            <span>üîé</span>
            <input id="searchInput" type="text" placeholder="Search (e.g., apple, carrot)"/>
          </div>
        </div>
      </div>

      <!-- Content -->
      <div class="content">
        <!-- HOME / CATEGORIES -->
        <div id="homeScreen">
          <div class="grid-2">
            <div class="card category" onclick="openCategory('fruit')">
              <div class="img-wrap">
                <img src="images/fruit-mix.jpg" alt="Fruit category"/>
              </div>
              <h3>Fruit</h3>
            </div>

            <div class="card category" onclick="openCategory('vegetables')">
              <div class="img-wrap">
                <img src="images/veg-mix.jpg" alt="Vegetables category"/>
              </div>
              <h3>Vegetables</h3>
            </div>
          </div>

          <p class="helper">Choose a category ‚Üí select an item ‚Üí view product details (tabs).</p>

          <!-- GLOBAL SEARCH RESULTS (from home) -->
          <div id="globalResults" style="display:none; margin-top:14px;">
            <div class="products" id="globalGrid"></div>
          </div>
        </div>

        <!-- LIST SCREEN -->
        <div id="listScreen" style="display:none;">
          <div class="products" id="listGrid"></div>
        </div>

        <!-- DETAIL SCREEN -->
        <div id="detailScreen" style="display:none;">
          <div class="detail-head card">
            <div class="thumb"><img id="detailImg" src="" alt=""/></div>
            <div class="title">
              <h2 id="detailName"></h2>
              <p id="detailMeta"></p>
            </div>
          </div>

          <div class="tabs">
            <button class="tab active" data-tab="info" onclick="setTab('info')">Product Info</button>
            <button class="tab" data-tab="storage" onclick="setTab('storage')">Storage Guide</button>
            <button class="tab" data-tab="shelf" onclick="setTab('shelf')">Shelf Life</button>
            <button class="tab" data-tab="farm" onclick="setTab('farm')">Farm/Producer</button>
            <button class="tab" data-tab="nutrition" onclick="setTab('nutrition')">Nutrition</button>
          </div>

          <div class="card detail-body" id="tabContent"></div>
        </div>
      </div>
    </div>
  </div>

<script>
  // ---------- DATA ----------
  const produce = [
    // FRUIT
    {
      id: "apple",
      category: "fruit",
      name: "Coles Pink Lady Apples",
      price: "A$1.09",
      approx: "approx. 170g each",
      img: "images/apple.jpg",
      tabs: {
        info: `Pink Lady apples are crisp, sweet-tart apples ideal for snacks, salads and baking.`,
        storage: `
          <ul>
            <li><b>Room temperature:</b> 2‚Äì5 days away from sunlight.</li>
            <li><b>Fridge:</b> 2‚Äì3 weeks in the crisper drawer (keep loose or in a breathable bag).</li>
            <li><b>Cut apples:</b> Airtight container in fridge; add lemon juice to reduce browning.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Bench storage:</b> 3‚Äì5 days.</li>
            <li><b>Kept chilled:</b> up to 2‚Äì3 weeks.</li>
            <li><b>Once cut:</b> best within 1‚Äì2 days.</li>
          </ul>`,
        farm: `Example supplier: Yarra Valley Orchards<br/>Region: Victoria, Australia`,
        nutrition: `
          <ul>
            <li>Source of dietary fibre</li>
            <li>Contains vitamin C</li>
            <li>Naturally low in fat and sodium</li>
          </ul>`
      }
       // Fruit catalogue items (matches the structure in your banana example)
const products = [
  {
    id: "cherry",
    category: "fruit",
    name: "Coles Sweet Red Cherries",
    price: "A$7.90",
    approx: "approx. 250g",
    img: "images/cherry.jpg",
    tabs: {
      info: `Bright, juicy and sweet‚Äîperfect for snacking, topping yoghurt, or adding to summer salads.`,
      storage: `
        <ul>
          <li><b>Fridge:</b> Store unwashed in a breathable container; wash just before eating.</li>
          <li><b>Bench:</b> Best avoided‚Äîsoftens quickly at room temperature.</li>
          <li><b>Tip:</b> Keep stems on to help maintain freshness.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Fridge:</b> 5‚Äì7 days (best flavour in first 3‚Äì4 days).</li>
          <li><b>Bench:</b> 1 day max in warm weather.</li>
        </ul>`,
      farm: `Example grower: Riverina Orchard Co-op<br/>Region: Riverina, New South Wales`,
      nutrition: `
        <ul>
          <li>Source of vitamin C</li>
          <li>Contains antioxidants (polyphenols)</li>
          <li>Hydrating snack with natural sugars</li>
        </ul>`
    }
  },

  {
    id: "kiwi",
    category: "fruit",
    name: "Coles Zesty Kiwi Fruit",
    price: "A$1.20",
    approx: "approx. 110g",
    img: "images/kiwi.jpg",
    tabs: {
      info: `Tangy-sweet with a vibrant green centre‚Äîgreat for smoothies, fruit bowls, and desserts.`,
      storage: `
        <ul>
          <li><b>Bench:</b> Ripen at room temperature until slightly soft to touch.</li>
          <li><b>Fridge:</b> Once ripe, refrigerate to slow further ripening.</li>
          <li><b>Tip:</b> Store away from bananas/apples if you want slower ripening.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Unripe (bench):</b> 3‚Äì6 days to ripen.</li>
          <li><b>Ripe (fridge):</b> 5‚Äì10 days.</li>
        </ul>`,
      farm: `Example grower: Coastal Kiwi Farms<br/>Region: Coffs Coast, New South Wales`,
      nutrition: `
        <ul>
          <li>High in vitamin C</li>
          <li>Dietary fibre support</li>
          <li>Contains potassium</li>
        </ul>`
    }
  },

  {
    id: "lemon",
    category: "fruit",
    name: "Coles Australian Lemons",
    price: "A$1.10",
    approx: "approx. 140g",
    img: "images/lemon.jpg",
    tabs: {
      info: `Sharp and aromatic‚Äîideal for dressings, marinades, baking, and fresh lemonade.`,
      storage: `
        <ul>
          <li><b>Fridge:</b> Store in crisper drawer for longest life.</li>
          <li><b>Bench:</b> Fine short-term, but skin can dry out faster.</li>
          <li><b>Tip:</b> Roll on bench before juicing to release more juice.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Fridge:</b> 2‚Äì4 weeks.</li>
          <li><b>Bench:</b> 5‚Äì10 days.</li>
        </ul>`,
      farm: `Example grower: Sunridge Citrus Collective<br/>Region: Sunraysia, Victoria`,
      nutrition: `
        <ul>
          <li>Vitamin C boost</li>
          <li>Low kilojoule flavour enhancer</li>
          <li>Contains citrus flavonoids</li>
        </ul>`
    }
  },

  {
    id: "orange",
    category: "fruit",
    name: "Coles Navel Oranges",
    price: "A$1.30",
    approx: "approx. 180g",
    img: "images/orange.jpg",
    tabs: {
      info: `Sweet, easy-peel and super juicy‚Äîperfect for lunchboxes or fresh squeezing.`,
      storage: `
        <ul>
          <li><b>Fridge:</b> Store in crisper for extended freshness.</li>
          <li><b>Bench:</b> Keep in a cool, airy spot out of direct sunlight.</li>
          <li><b>Tip:</b> Keep dry to reduce mould risk.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Bench:</b> 7‚Äì10 days.</li>
          <li><b>Fridge:</b> 2‚Äì3 weeks.</li>
        </ul>`,
      farm: `Example grower: Murray Valley Citrus Pty Ltd<br/>Region: Mildura District, Victoria`,
      nutrition: `
        <ul>
          <li>Excellent source of vitamin C</li>
          <li>Hydration-friendly snack</li>
          <li>Contains folate</li>
        </ul>`
    }
  },

  {
    id: "papaya",
    category: "fruit",
    name: "Coles Tropical Papaya",
    price: "A$6.50",
    approx: "approx. 700g",
    img: "images/papaya.jpg",
    tabs: {
      info: `Soft, fragrant and mellow-sweet‚Äîgreat with lime, in smoothies, or breakfast bowls.`,
      storage: `
        <ul>
          <li><b>Bench:</b> Ripen until skin turns yellow-orange and yields slightly.</li>
          <li><b>Fridge:</b> Once ripe, refrigerate whole or cut (sealed).</li>
          <li><b>Cut fruit:</b> Store in an airtight container.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Unripe (bench):</b> 2‚Äì5 days to ripen.</li>
          <li><b>Ripe (fridge):</b> 2‚Äì4 days.</li>
          <li><b>Cut (fridge):</b> 1‚Äì2 days.</li>
        </ul>`,
      farm: `Example grower: Far North Tropics Produce Co-op<br/>Region: Atherton Tablelands, Queensland`,
      nutrition: `
        <ul>
          <li>Vitamin C and vitamin A (beta-carotene)</li>
          <li>Contains fibre</li>
          <li>Naturally sweet, low fat</li>
        </ul>`
    }
  },

  {
    id: "peach",
    category: "fruit",
    name: "Coles Juicy Yellow Peaches",
    price: "A$2.40",
    approx: "approx. 170g",
    img: "images/peach.jpg",
    tabs: {
      info: `Fragrant and silky‚Äîideal for eating fresh, grilling, or adding to oats and desserts.`,
      storage: `
        <ul>
          <li><b>Bench:</b> Ripen stem-side down until fragrant and slightly soft.</li>
          <li><b>Fridge:</b> Once ripe, refrigerate to hold freshness.</li>
          <li><b>Tip:</b> Bring to room temp before eating for best flavour.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Unripe (bench):</b> 2‚Äì4 days to ripen.</li>
          <li><b>Ripe (fridge):</b> 3‚Äì5 days.</li>
        </ul>`,
      farm: `Example grower: Goulburn Valley Stonefruit Growers<br/>Region: Shepparton, Victoria`,
      nutrition: `
        <ul>
          <li>Source of vitamin C</li>
          <li>Contains potassium</li>
          <li>Hydrating fruit with fibre</li>
        </ul>`
    }
  },

  {
    id: "pineapple",
    category: "fruit",
    name: "Coles Sweet Gold Pineapple",
    price: "A$5.80",
    approx: "approx. 1.4kg",
    img: "images/pineapple.jpg",
    tabs: {
      info: `Tropical, tangy-sweet and aromatic‚Äîgreat for smoothies, grilling, salsas, and desserts.`,
      storage: `
        <ul>
          <li><b>Bench:</b> Store upright in a cool area for short periods.</li>
          <li><b>Fridge:</b> Whole pineapple can chill 2‚Äì3 days; cut pineapple should be sealed.</li>
          <li><b>Tip:</b> For easier prep, slice and store portions for quick snacks.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Whole (bench):</b> 2‚Äì3 days.</li>
          <li><b>Whole (fridge):</b> 3‚Äì5 days.</li>
          <li><b>Cut (fridge):</b> 3‚Äì4 days.</li>
        </ul>`,
      farm: `Example grower: Sunshine Coast Pineapple Estates<br/>Region: Glass House Mountains, Queensland`,
      nutrition: `
        <ul>
          <li>Vitamin C source</li>
          <li>Contains manganese</li>
          <li>Natural enzymes (e.g., bromelain)</li>
        </ul>`
    }
  },

  {
    id: "plum",
    category: "fruit",
    name: "Coles Red Plums",
    price: "A$1.90",
    approx: "approx. 140g",
    img: "images/plum.jpg",
    tabs: {
      info: `Sweet-tart and juicy‚Äîperfect for snacking, baking, or adding to salads and cheese boards.`,
      storage: `
        <ul>
          <li><b>Bench:</b> Ripen until slightly soft.</li>
          <li><b>Fridge:</b> Once ripe, refrigerate to extend freshness.</li>
          <li><b>Tip:</b> Keep in a single layer to avoid bruising.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Unripe (bench):</b> 2‚Äì4 days to ripen.</li>
          <li><b>Ripe (fridge):</b> 3‚Äì6 days.</li>
        </ul>`,
      farm: `Example grower: Riverland Stonefruit Group<br/>Region: Riverland, South Australia`,
      nutrition: `
        <ul>
          <li>Source of vitamin C</li>
          <li>Contains fibre</li>
          <li>Natural antioxidants (polyphenols)</li>
        </ul>`
    }
  },

  {
    id: "pomegranate",
    category: "fruit",
    name: "Coles Pomegranate",
    price: "A$3.50",
    approx: "approx. 350g",
    img: "images/pomegranate.jpg",
    tabs: {
      info: `Crisp, jewel-like arils with a sweet-tart pop‚Äîgreat for salads, yoghurt, and desserts.`,
      storage: `
        <ul>
          <li><b>Fridge:</b> Store whole pomegranate in crisper.</li>
          <li><b>Arils:</b> Keep refrigerated in airtight container.</li>
          <li><b>Tip:</b> De-seed in a bowl of water to reduce splatter.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Whole (fridge):</b> 2‚Äì4 weeks.</li>
          <li><b>Arils (fridge):</b> 3‚Äì5 days.</li>
        </ul>`,
      farm: `Example grower: Darling Downs Orchard Partners<br/>Region: Granite Belt, Queensland`,
      nutrition: `
        <ul>
          <li>Antioxidant-rich fruit</li>
          <li>Source of vitamin C</li>
          <li>Contains fibre (especially in arils)</li>
        </ul>`
    }
  },

  {
    id: "strawberry",
    category: "fruit",
    name: "Coles Fresh Strawberries",
    price: "A$4.90",
    approx: "approx. 250g",
    img: "images/strawberry.jpg",
    tabs: {
      info: `Sweet and fragrant‚Äîperfect for snacking, desserts, or blending into smoothies.`,
      storage: `
        <ul>
          <li><b>Fridge:</b> Keep unwashed; line container with paper towel to absorb moisture.</li>
          <li><b>Wash:</b> Only wash right before eating to reduce mould.</li>
          <li><b>Tip:</b> Remove any soft berries to prevent spread.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Fridge:</b> 2‚Äì5 days (best in first 1‚Äì2 days).</li>
          <li><b>Bench:</b> Same day only.</li>
        </ul>`,
      farm: `Example grower: Gippsland Berry Growers Co-op<br/>Region: West Gippsland, Victoria`,
      nutrition: `
        <ul>
          <li>High in vitamin C</li>
          <li>Contains folate</li>
          <li>Fibre-friendly snack</li>
        </ul>`
    }
  },

  {
    id: "watermelon",
    category: "fruit",
    name: "Coles Seedless Watermelon",
    price: "A$8.90",
    approx: "approx. 3.5kg",
    img: "images/watermelon.jpg",
    tabs: {
      info: `Crisp, super hydrating and lightly sweet‚Äîideal for hot days, fruit salads, and juices.`,
      storage: `
        <ul>
          <li><b>Whole:</b> Store on bench in a cool spot.</li>
          <li><b>Cut:</b> Refrigerate in an airtight container or tightly wrapped.</li>
          <li><b>Tip:</b> Chill before serving for best texture and sweetness.</li>
        </ul>`,
      shelf: `
        <ul>
          <li><b>Whole (bench):</b> 7‚Äì14 days.</li>
          <li><b>Cut (fridge):</b> 3‚Äì5 days.</li>
        </ul>`,
      farm: `Example grower: Ord Valley Melon Producers<br/>Region: Kununurra, Western Australia`,
      nutrition: `
        <ul>
          <li>Very hydrating (high water content)</li>
          <li>Contains vitamin A (carotenoids)</li>
          <li>Includes lycopene (antioxidant)</li>
        </ul>`
    }
  }

    {
      id: "banana",
      category: "fruit",
      name: "Coles Lady Finger Bananas",
      price: "A$1.15",
      approx: "approx. 140g",
      img: "images/banana.jpg",
      tabs: {
        info: `Lady Finger bananas are smaller and sweeter with a smooth, creamy texture‚Äîgreat for lunchboxes.`,
        storage: `
          <ul>
            <li><b>Bench:</b> Keep at room temperature until desired ripeness.</li>
            <li><b>Fridge:</b> Once ripe, refrigerate to slow ripening (skin darkens, flesh stays fine).</li>
            <li><b>Cut bananas:</b> Cover and refrigerate; best eaten same day.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Green:</b> 4‚Äì6 days to ripen.</li>
            <li><b>Ripe:</b> 1‚Äì2 days on bench.</li>
            <li><b>Ripe + chilled:</b> 3‚Äì5 more days.</li>
          </ul>`,
        farm: `Example grower: North Queensland Banana Co-op<br/>Region: Queensland, Australia`,
        nutrition: `
          <ul>
            <li>Potassium source</li>
            <li>Vitamin B6</li>
            <li>Quick energy (carbohydrates)</li>
          </ul>`
      }
    },
    {
      id: "mango",
      category: "fruit",
      name: "Kensington Pride Mango",
      price: "A$3.99",
      approx: "1 each",
      img: "images/mango.jpg",
      tabs: {
        info: `Kensington Pride is a popular Australian mango variety known for its fragrant aroma and juicy, sweet flesh.`,
        storage: `
          <ul>
            <li><b>Unripe:</b> Ripen on bench (avoid direct sun).</li>
            <li><b>Ripe:</b> Store in fridge 2‚Äì4 days.</li>
            <li><b>Cut mango:</b> Airtight container in fridge; best within 1‚Äì2 days.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Unripe on bench:</b> 2‚Äì5 days (until slightly soft).</li>
            <li><b>Ripe chilled:</b> 2‚Äì4 days.</li>
            <li><b>Once cut:</b> best within 1‚Äì2 days.</li>
          </ul>`,
        farm: `Example grower: Tropical North Orchards<br/>Region: Northern Territory / Queensland (seasonal)`,
        nutrition: `
          <ul>
            <li>Vitamin C and vitamin A (beta-carotene)</li>
            <li>Contains fibre</li>
            <li>Naturally fat-free</li>
          </ul>`
      }
    },
    {
      id: "grapes",
      category: "fruit",
      name: "Coles Seedless Grapes",
      price: "A$8.50",
      approx: "approx. 400g",
      img: "images/grapes.jpg",
      tabs: {
        info: `Seedless grapes are crisp and refreshing‚Äîgreat for snacking, fruit salads, and cheese boards.`,
        storage: `
          <ul>
            <li><b>Fridge:</b> Keep unwashed in a breathable bag/container.</li>
            <li><b>Wash:</b> Rinse just before eating to reduce spoilage.</li>
            <li><b>Freezing:</b> Freeze for a cold snack (texture changes slightly).</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Chilled:</b> 1‚Äì2 weeks (best quality in first week).</li>
            <li><b>Bench:</b> 1 day max (softens quickly).</li>
          </ul>`,
        farm: `Example supplier: Sunraysia Vineyards<br/>Region: Victoria / NSW (seasonal)`,
        nutrition: `
          <ul>
            <li>Contains antioxidants (polyphenols)</li>
            <li>Hydrating fruit (high water content)</li>
            <li>Small amounts of vitamin K</li>
          </ul>`
      }
    },

    // VEGETABLES
    {
      id: "carrots",
      category: "vegetables",
      name: "Fresh Carrots",
      price: "A$2.50",
      approx: "approx. 1kg",
      img: "images/carrots.jpg",
      tabs: {
        info: `Carrots are versatile and crunchy‚Äîgreat raw, roasted, steamed, or added to soups and stir-fries.`,
        storage: `
          <ul>
            <li><b>Fridge:</b> Store in crisper drawer in a bag/container.</li>
            <li><b>Keep dry:</b> Moisture can cause sliminess.</li>
            <li><b>Cut carrots:</b> Store in water (change daily) for crispness.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Chilled:</b> 2‚Äì4 weeks.</li>
            <li><b>Once cut:</b> 3‚Äì5 days (best quality).</li>
          </ul>`,
        farm: `Example supplier: Riverina Veg Growers<br/>Region: NSW, Australia`,
        nutrition: `
          <ul>
            <li>High in beta-carotene (vitamin A)</li>
            <li>Source of fibre</li>
            <li>Low in calories</li>
          </ul>`
      }
    },
    {
      id: "broccoli",
      category: "vegetables",
      name: "Broccoli",
      price: "A$2.90",
      approx: "1 head",
      img: "images/broccoli.jpg",
      tabs: {
        info: `Broccoli is a nutrient-dense vegetable ideal for steaming, roasting, stir-fry and pasta dishes.`,
        storage: `
          <ul>
            <li><b>Fridge:</b> Unwashed in a breathable bag.</li>
            <li><b>Don‚Äôt seal tight:</b> Needs airflow to stay fresh.</li>
            <li><b>Cooked:</b> Store in airtight container, refrigerate.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Chilled:</b> 3‚Äì7 days.</li>
            <li><b>Cooked:</b> 3‚Äì4 days.</li>
          </ul>`,
        farm: `Example supplier: Gippsland Produce<br/>Region: Victoria, Australia`,
        nutrition: `
          <ul>
            <li>Vitamin C and vitamin K</li>
            <li>Contains folate</li>
            <li>Source of fibre</li>
          </ul>`
      }
    },
    {
      id: "lettuce",
      category: "vegetables",
      name: "Lettuce",
      price: "A$2.20",
      approx: "1 each",
      img: "images/lettuce.jpg",
      tabs: {
        info: `Lettuce adds crunch and freshness to salads, wraps and sandwiches.`,
        storage: `
          <ul>
            <li><b>Fridge:</b> Wrap in paper towel and store in a bag/container.</li>
            <li><b>Keep dry:</b> Moisture causes wilting/slime.</li>
            <li><b>Washed leaves:</b> Dry well; store in sealed container.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Chilled:</b> 5‚Äì10 days (varies by type).</li>
            <li><b>Washed leaves:</b> 3‚Äì5 days.</li>
          </ul>`,
        farm: `Example supplier: Hawkesbury Greens<br/>Region: NSW, Australia`,
        nutrition: `
          <ul>
            <li>Hydrating (high water content)</li>
            <li>Provides folate</li>
            <li>Low calorie</li>
          </ul>`
      }
    },
    {
      id: "onions",
      category: "vegetables",
      name: "Brown Onions",
      price: "A$2.00",
      approx: "approx. 1kg",
      img: "images/onions.jpg",
      tabs: {
        info: `Onions add depth of flavour to most dishes‚Äîgreat saut√©ed, roasted, or used as a base for sauces.`,
        storage: `
          <ul>
            <li><b>Pantry:</b> Cool, dark, well-ventilated space (not in plastic bag).</li>
            <li><b>Fridge (cut):</b> Airtight container; keep away from strong-odour foods.</li>
          </ul>`,
        shelf: `
          <ul>
            <li><b>Whole (pantry):</b> 2‚Äì4 weeks.</li>
            <li><b>Cut (fridge):</b> 3‚Äì7 days.</li>
          </ul>`,
        farm: `Example supplier: Murray Basin Growers<br/>Region: VIC/SA, Australia`,
        nutrition: `
          <ul>
            <li>Contains antioxidants (quercetin)</li>
            <li>Small amounts of vitamin C</li>
            <li>Low fat, low sodium</li>
          </ul>`
      }
    }
  ];

  // ---------- STATE ----------
  let currentCategory = null;
  let currentItem = null;
  let currentTab = "info";
  let currentScreen = "home"; // home | list | detail

  // ---------- ELEMENTS ----------
  const screenTitle = document.getElementById("screenTitle");
  const backBtn = document.getElementById("backBtn");
  const searchInput = document.getElementById("searchInput");

  const homeScreen = document.getElementById("homeScreen");
  const globalResults = document.getElementById("globalResults");
  const globalGrid = document.getElementById("globalGrid");

  const listScreen = document.getElementById("listScreen");
  const listGrid = document.getElementById("listGrid");

  const detailScreen = document.getElementById("detailScreen");
  const detailImg = document.getElementById("detailImg");
  const detailName = document.getElementById("detailName");
  const detailMeta = document.getElementById("detailMeta");
  const tabContent = document.getElementById("tabContent");

  // ---------- NAV ----------
  function showScreen(name){
    currentScreen = name;
    homeScreen.style.display = (name === "home") ? "block" : "none";
    listScreen.style.display = (name === "list") ? "block" : "none";
    detailScreen.style.display = (name === "detail") ? "block" : "none";

    backBtn.style.visibility = (name === "home") ? "hidden" : "visible";
  }

  backBtn.addEventListener("click", () => {
    if(currentScreen === "detail"){
      openCategory(currentCategory, true); // back to list
    }else{
      currentCategory = null;
      currentItem = null;
      screenTitle.textContent = "Find Produce";
      showScreen("home");
      clearSearch();
      renderGlobalResults(""); // hide
    }
  });

  // ---------- RENDER ----------
  function renderProductCard(item){
    return `
      <div class="card product" onclick="openDetail('${item.id}')">
        <div class="plus">+</div>
        <div class="img-frame">
          <img src="${item.img}" alt="${item.name}">
        </div>
        <div class="badge-price">${item.price}</div>
        <div class="name">${item.name}</div>
        <div class="meta">${item.approx}</div>
      </div>
    `;
  }

  function openCategory(cat, keepSearch=false){
    currentCategory = cat;
    screenTitle.textContent = cat === "fruit" ? "Fruit" : "Vegetables";
    showScreen("list");

    const items = produce.filter(p => p.category === cat);
    listGrid.innerHTML = items.map(renderProductCard).join("");

    if(!keepSearch) clearSearch();
  }

  function openDetail(id){
    currentItem = produce.find(p => p.id === id);
    if(!currentItem) return;

    screenTitle.textContent = currentItem.category === "fruit" ? "Fruit" : "Vegetables";
    showScreen("detail");

    detailImg.src = currentItem.img;
    detailName.textContent = currentItem.name;
    detailMeta.textContent = `${currentItem.price} ‚Ä¢ ${currentItem.approx}`;

    setTab("info");
  }

  function setTab(tab){
    currentTab = tab;

    // update active button
    document.querySelectorAll(".tab").forEach(btn => {
      btn.classList.toggle("active", btn.dataset.tab === tab);
    });

    tabContent.innerHTML = currentItem.tabs[tab] || "No information available.";
  }

  // ---------- SEARCH ----------
  function clearSearch(){
    searchInput.value = "";
  }

  function renderGlobalResults(query){
    const q = query.trim().toLowerCase();
    if(!q){
      globalResults.style.display = "none";
      globalGrid.innerHTML = "";
      return;
    }
    const matches = produce.filter(p =>
      p.name.toLowerCase().includes(q) || p.id.toLowerCase().includes(q)
    );

    globalResults.style.display = "block";
    globalGrid.innerHTML = matches.length
      ? matches.map(renderProductCard).join("")
      : `<p class="helper">No matches found for ‚Äú${query}‚Äù.</p>`;
  }

  function renderListResults(query){
    const q = query.trim().toLowerCase();
    const items = produce.filter(p => p.category === currentCategory);
    const matches = !q ? items : items.filter(p => p.name.toLowerCase().includes(q) || p.id.includes(q));
    listGrid.innerHTML = matches.length
      ? matches.map(renderProductCard).join("")
      : `<p class="helper">No matches in this category.</p>`;
  }

  searchInput.addEventListener("input", (e) => {
    const q = e.target.value;

    if(currentScreen === "home"){
      renderGlobalResults(q); // ‚úÖ search across fruit + veg on home
    }else if(currentScreen === "list"){
      renderListResults(q);   // ‚úÖ search within current category list
    }else{
      // on detail screen: optional, you can ignore or jump back
      // We'll jump to category list results when typing:
      showScreen("list");
      renderListResults(q);
    }
  });

  // initial
  showScreen("home");
</script>
</body>
</html>

